<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QLQN Manager v2.6 - Interactive System Docs</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Config Theme -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        military: {
                            900: '#0a1f16',
                            800: '#14452F', // Main Theme Color
                            700: '#1b5c3f',
                            600: '#22c55e',
                            100: '#f0fdf4',
                            50: '#f4f6f8'
                        }
                    },
                    fontFamily: {
                        sans: ['Segoe UI', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'],
                        mono: ['Consolas', 'Monaco', 'Courier New', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }

        /* Chart Container Styles - Mandatory */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Tree View Animations */
        .tree-content {
            display: none;
            padding-left: 1.5rem;
            border-left: 1px dashed #cbd5e1;
        }
        .tree-content.open {
            display: block;
            animation: slideDown 0.2s ease-out;
        }
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-item.active {
            background-color: #14452F;
            color: white;
            border-right: 4px solid #22c55e;
        }

        .deploy-tab.active {
            border-bottom: 3px solid #14452F;
            color: #14452F;
            font-weight: bold;
            background-color: #f0fdf4;
        }
    </style>

    <!-- Placeholder Comments Required by Instructions -->
    <!-- Chosen Palette: Military Green (#14452F) grounded with Warm Neutrals (#f4f6f8) and vibrant accents (#22c55e) -->
    <!-- Application Structure Plan: Dashboard Layout with Sidebar Navigation. 
         Updated Structure:
         1. Overview: Quick stats and purpose. 
         2. Architecture: File tree and Tech Stack visualization.
         3. Database: Interactive schema explorer.
         4. Deployment & Updates (REVISED): Comprehensive guide separating Dev checklist and User safety procedures.
         5. Security: Security details.
         6. Troubleshooting: Searchable FAQ.
         This structure transforms the linear Markdown into a non-linear, task-based exploration tool. -->
    <!-- Visualization & Content Choices: 
         - Tech Stack -> Doughnut Chart -> To visualize the composition of the system.
         - DB Complexity -> Bar Chart -> To compare table structures.
         - File Tree -> Interactive HTML List -> To allow exploration of the codebase structure.
         - Troubleshooting -> JS Filter -> To quickly find solutions.
         - Deployment Guide -> Tabs System -> To separate Dev tasks from User tasks.
         - Confirming NO SVG/Mermaid. Icons are Unicode or CSS shapes. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

</head>
<body class="bg-military-50 text-gray-800 h-screen flex flex-col md:flex-row overflow-hidden font-sans">

    <!-- SIDEBAR NAVIGATION -->
    <aside class="w-full md:w-64 bg-white shadow-xl flex flex-col flex-shrink-0 z-20">
        <div class="p-6 bg-military-800 text-white">
            <h1 class="text-xl font-bold tracking-wider uppercase flex items-center gap-2">
                <span class="text-military-600 text-2xl">‚ùñ</span> QLQN Manager
            </h1>
            <div class="mt-2 text-xs font-mono text-gray-300 opacity-80 border-t border-gray-600 pt-2">
                Docs Viewer v2.6
            </div>
        </div>
        
        <nav class="flex-1 overflow-y-auto py-4 space-y-1">
            <button onclick="navigate('overview')" id="nav-overview" class="nav-item active w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üìä</span> T·ªïng quan h·ªá th·ªëng
            </button>
            <button onclick="navigate('architecture')" id="nav-architecture" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üèóÔ∏è</span> Ki·∫øn tr√∫c & Source
            </button>
            <button onclick="navigate('database')" id="nav-database" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üóÑÔ∏è</span> C∆° s·ªü d·ªØ li·ªáu
            </button>
            <button onclick="navigate('deployment')" id="nav-deployment" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üì¶</span> ƒê√≥ng g√≥i & Update
            </button>
            <button onclick="navigate('security')" id="nav-security" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üîí</span> C∆° ch·∫ø B·∫£o m·∫≠t
            </button>
            <button onclick="navigate('troubleshoot')" id="nav-troubleshoot" class="nav-item w-full text-left px-6 py-3 hover:bg-gray-100 transition-colors flex items-center gap-3 text-sm font-semibold text-gray-700">
                <span>üîß</span> X·ª≠ l√Ω s·ª± c·ªë
            </button>
        </nav>

        <div class="p-4 border-t text-center text-xs text-gray-400">
            &copy; 2026 DHSystem
        </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main class="flex-1 overflow-y-auto relative scroll-smooth" id="main-content">
        
        <!-- TOP BAR -->
        <header class="bg-white border-b sticky top-0 z-10 px-8 py-4 flex justify-between items-center shadow-sm">
            <h2 id="page-title" class="text-2xl font-bold text-military-800">T·ªïng quan h·ªá th·ªëng</h2>
            <div class="flex items-center gap-3">
                <span class="px-3 py-1 rounded-full bg-green-100 text-green-700 text-xs font-bold border border-green-200">System Online</span>
                <span class="px-3 py-1 rounded-full bg-gray-100 text-gray-600 text-xs font-bold border border-gray-200">Offline Mode</span>
            </div>
        </header>

        <!-- VIEWS -->
        <div class="p-4 md:p-8 max-w-7xl mx-auto space-y-8">

            <!-- 1. OVERVIEW VIEW -->
            <div id="view-overview" class="view-section animate-fade-in block">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <!-- Metric Cards -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-military-600 hover:shadow-md transition-shadow">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">Phi√™n b·∫£n</div>
                        <div class="text-3xl font-black text-gray-800">v2.6</div>
                        <div class="mt-2 text-sm text-gray-600">Stable Release</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-blue-500 hover:shadow-md transition-shadow">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">N·ªÅn t·∫£ng</div>
                        <div class="text-3xl font-black text-gray-800">Desktop</div>
                        <div class="mt-2 text-sm text-gray-600">Windows / Electron</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl shadow-sm border-l-4 border-purple-500 hover:shadow-md transition-shadow">
                        <div class="text-gray-500 text-xs font-bold uppercase mb-2">Database</div>
                        <div class="text-3xl font-black text-gray-800">NoSQL</div>
                        <div class="mt-2 text-sm text-gray-600">Dexie.js (IndexedDB)</div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow-sm p-8 mb-8 border border-gray-100">
                    <h3 class="text-lg font-bold text-military-800 mb-4 border-b pb-2">M·ª•c ƒë√≠ch h·ªá th·ªëng</h3>
                    <p class="text-gray-600 leading-relaxed">
                        H·ªá th·ªëng <strong>QLQN Manager</strong> ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ qu·∫£n l√Ω h·ªì s∆° qu√¢n nh√¢n, theo d√µi di bi·∫øn ƒë·ªông, b√°o c√°o th·ªëng k√™ v√† in ·∫•n h·ªì s∆° trong m√¥i tr∆∞·ªùng n·ªôi b·ªô. 
                        ƒêi·ªÉm ƒë·∫∑c bi·ªát l√† h·ªá th·ªëng ho·∫°t ƒë·ªông <strong>ho√†n to√†n Offline</strong>, ƒë·∫£m b·∫£o an to√†n d·ªØ li·ªáu v√† kh√¥ng ph·ª• thu·ªôc v√†o k·∫øt n·ªëi Internet.
                    </p>
                </div>

                <!-- Tech Stack Visual -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100">
                        <h3 class="text-lg font-bold text-military-800 mb-6 text-center">Ki·∫øn tr√∫c c√¥ng ngh·ªá</h3>
                        <div class="chart-container">
                            <canvas id="techStackChart"></canvas>
                        </div>
                        <p class="text-center text-xs text-gray-500 mt-4 italic">T·ª∑ tr·ªçng vai tr√≤ c√°c c√¥ng ngh·ªá trong h·ªá th·ªëng</p>
                    </div>
                    
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-gray-100 flex flex-col justify-center">
                        <h3 class="text-lg font-bold text-military-800 mb-4">Th√†nh ph·∫ßn chi ti·∫øt</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start gap-3">
                                <span class="bg-blue-100 text-blue-700 p-2 rounded-lg text-lg">‚ö°</span>
                                <div>
                                    <div class="font-bold text-gray-800">Electron</div>
                                    <div class="text-sm text-gray-500">Core App - M√¥i tr∆∞·ªùng ch·∫°y Desktop</div>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-cyan-100 text-cyan-700 p-2 rounded-lg text-lg">‚öõÔ∏è</span>
                                <div>
                                    <div class="font-bold text-gray-800">ReactJS (Vite)</div>
                                    <div class="text-sm text-gray-500">Frontend - Giao di·ªán ng∆∞·ªùi d√πng</div>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-yellow-100 text-yellow-700 p-2 rounded-lg text-lg">üóÑÔ∏è</span>
                                <div>
                                    <div class="font-bold text-gray-800">Dexie.js</div>
                                    <div class="text-sm text-gray-500">Database - L∆∞u tr·ªØ c·ª•c b·ªô</div>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="bg-teal-100 text-teal-700 p-2 rounded-lg text-lg">üé®</span>
                                <div>
                                    <div class="font-bold text-gray-800">Tailwind CSS</div>
                                    <div class="text-sm text-gray-500">Styling - Thi·∫øt k·∫ø giao di·ªán</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 2. ARCHITECTURE VIEW -->
            <div id="view-architecture" class="view-section hidden">
                <div class="mb-6 bg-white p-6 rounded-xl border-l-4 border-military-800 shadow-sm">
                    <h3 class="font-bold text-lg mb-2">C·∫•u tr√∫c Source Code</h3>
                    <p class="text-sm text-gray-600">
                        Kh√°m ph√° c·∫•u tr√∫c th∆∞ m·ª•c c·ªßa d·ª± √°n. Nh·∫•n v√†o c√°c th∆∞ m·ª•c ƒë·ªÉ m·ªü r·ªông/thu g·ªçn.
                        C√°c file ƒë∆∞·ª£c ƒë√°nh d·∫•u <span class="text-red-500 font-bold">[QUAN TR·ªåNG]</span> ch·ª©a logic c·ªët l√µi.
                    </p>
                </div>

                <div class="bg-gray-900 text-gray-300 rounded-xl shadow-2xl overflow-hidden font-mono text-sm border border-gray-700">
                    <div class="bg-gray-800 px-4 py-2 border-b border-gray-700 flex gap-2">
                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                        <span class="ml-2 text-xs opacity-50">QLQN-manager/</span>
                    </div>
                    <div class="p-6">
                        <!-- Interactive Tree -->
                        <div class="space-y-2">
                            <!-- Root Files -->
                            <div class="group cursor-pointer hover:text-white transition-colors" onclick="toggleTree('desc-main')">
                                <span class="text-yellow-400">üìÑ main.js</span> 
                                <span class="text-red-400 text-xs ml-2 font-bold">[QUAN TR·ªåNG]</span>
                                <div id="desc-main" class="hidden text-gray-500 text-xs italic ml-6 mb-2">
                                    Main Process c·ªßa Electron (Backend logic). X·ª≠ l√Ω c·ª≠a s·ªï, IPC, File System.
                                </div>
                            </div>
                            <div class="group cursor-pointer hover:text-white transition-colors" onclick="toggleTree('desc-preload')">
                                <span class="text-yellow-400">üìÑ preload.js</span>
                                <div id="desc-preload" class="hidden text-gray-500 text-xs italic ml-6 mb-2">
                                    C·∫ßu n·ªëi b·∫£o m·∫≠t (Context Bridge) gi·ªØa Electron v√† React.
                                </div>
                            </div>
                            <div class="group cursor-pointer hover:text-white transition-colors" onclick="toggleTree('desc-store')">
                                <span class="text-blue-400">üìÑ store.ts</span>
                                <span class="text-red-400 text-xs ml-2 font-bold">[QUAN TR·ªåNG]</span>
                                <div id="desc-store" class="hidden text-gray-500 text-xs italic ml-6 mb-2">
                                    C·∫•u h√¨nh Dexie DB, ƒë·ªãnh nghƒ©a Schema, v√† to√†n b·ªô logic CRUD d·ªØ li·ªáu.
                                </div>
                            </div>
                            <div class="group cursor-pointer hover:text-white transition-colors">
                                <span class="text-blue-400">üìÑ App.tsx</span> <span class="text-gray-500 text-xs ml-2">// Component g·ªëc</span>
                            </div>

                            <!-- Components Folder -->
                            <div>
                                <div class="cursor-pointer hover:text-white flex items-center gap-2" onclick="toggleFolder('folder-components')">
                                    <span class="text-purple-400">üìÇ components/</span>
                                    <span class="text-xs text-gray-600">[Click to toggle]</span>
                                </div>
                                <div id="folder-components" class="tree-content open">
                                    <div class="py-1 hover:text-white cursor-pointer" onclick="alert('LoginScreen: M√†n h√¨nh ƒëƒÉng nh·∫≠p & Ch·∫ø ƒë·ªô nh·∫≠p li·ªáu nhanh')">üìÑ LoginScreen.tsx</div>
                                    <div class="py-1 hover:text-white cursor-pointer" onclick="alert('PersonnelForm: Form nh·∫≠p li·ªáu chi ti·∫øt. Logic ph·ª©c t·∫°p nh·∫•t h·ªá th·ªëng.')">üìÑ PersonnelForm.tsx <span class="text-xs text-yellow-600">‚òÖ Core UI</span></div>
                                    <div class="py-1 hover:text-white">üìÑ Dashboard.tsx</div>
                                    <div class="py-1 hover:text-white">üìÑ UnitTree.tsx</div>
                                </div>
                            </div>

                            <!-- Utils Folder -->
                            <div>
                                <div class="cursor-pointer hover:text-white flex items-center gap-2" onclick="toggleFolder('folder-utils')">
                                    <span class="text-green-400">üìÇ utils/</span>
                                    <span class="text-xs text-gray-600">[Click to toggle]</span>
                                </div>
                                <div id="folder-utils" class="tree-content">
                                    <div class="py-1 hover:text-white">üìÑ imageHelper.ts <span class="text-xs text-gray-500">// N√©n ·∫£nh base64</span></div>
                                    <div class="py-1 hover:text-white">üìÑ personnelFilter.ts</div>
                                    <div class="py-1 hover:text-white">üìÑ exportHelper.ts</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. DATABASE VIEW -->
            <div id="view-database" class="view-section hidden">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8">
                    <h3 class="text-lg font-bold text-military-800 mb-4">C·∫•u tr√∫c d·ªØ li·ªáu (Dexie.js Schema)</h3>
                    <p class="text-gray-600 mb-6 text-sm">
                        D·ªØ li·ªáu l∆∞u t·∫°i <code>IndexedDB</code>. Kh√¥ng c√≥ SQL. B·∫•m v√†o t√™n b·∫£ng ƒë·ªÉ xem chi ti·∫øt.
                    </p>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        <!-- Table List -->
                        <div class="space-y-4">
                            <div onclick="showTableDetail('personnel')" class="cursor-pointer bg-blue-50 hover:bg-blue-100 border border-blue-200 p-4 rounded-lg transition-colors group">
                                <div class="font-bold text-blue-800 flex justify-between">
                                    üì¶ personnel
                                    <span class="text-xs bg-white px-2 py-0.5 rounded border border-blue-100 group-hover:border-blue-300">Main Table</span>
                                </div>
                                <div class="text-xs text-blue-600 mt-1">L∆∞u tr·ªØ h·ªì s∆° qu√¢n nh√¢n</div>
                            </div>
                            <div onclick="showTableDetail('units')" class="cursor-pointer bg-green-50 hover:bg-green-100 border border-green-200 p-4 rounded-lg transition-colors group">
                                <div class="font-bold text-green-800 flex justify-between">
                                    üå≤ units
                                    <span class="text-xs bg-white px-2 py-0.5 rounded border border-green-100 group-hover:border-green-300">Tree Data</span>
                                </div>
                                <div class="text-xs text-green-600 mt-1">C√¢y ph√¢n c·∫•p ƒë∆°n v·ªã</div>
                            </div>
                            <div onclick="showTableDetail('logs')" class="cursor-pointer bg-gray-50 hover:bg-gray-100 border border-gray-200 p-4 rounded-lg transition-colors group">
                                <div class="font-bold text-gray-800 flex justify-between">
                                    üìù logs
                                    <span class="text-xs bg-white px-2 py-0.5 rounded border border-gray-100 group-hover:border-gray-300">System</span>
                                </div>
                                <div class="text-xs text-gray-600 mt-1">Nh·∫≠t k√Ω ho·∫°t ƒë·ªông & Debug</div>
                            </div>
                        </div>

                        <!-- Detail View -->
                        <div class="lg:col-span-2 bg-gray-50 rounded-xl border border-gray-200 p-6 relative">
                            <div id="db-detail-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-400 italic">
                                Ch·ªçn m·ªôt b·∫£ng b√™n tr√°i ƒë·ªÉ xem chi ti·∫øt
                            </div>
                            
                            <div id="db-detail-content" class="hidden animate-fade-in">
                                <h4 id="table-name" class="text-xl font-mono font-bold text-military-800 border-b border-gray-300 pb-2 mb-4"></h4>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-sm text-left">
                                        <thead class="bg-gray-200 text-gray-700 uppercase font-bold text-xs">
                                            <tr>
                                                <th class="p-3">Tr∆∞·ªùng (Field)</th>
                                                <th class="p-3">Lo·∫°i (Type)</th>
                                                <th class="p-3">M√¥ t·∫£</th>
                                            </tr>
                                        </thead>
                                        <tbody id="table-fields" class="divide-y divide-gray-200 bg-white">
                                            <!-- Dynamic Rows -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">
                    <h3 class="text-lg font-bold text-military-800 mb-6 text-center">ƒê·ªô ph·ª©c t·∫°p d·ªØ li·ªáu</h3>
                    <div class="chart-container">
                        <canvas id="dbComplexityChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- 4. NEW: DEPLOYMENT & UPDATE VIEW -->
            <div id="view-deployment" class="view-section hidden">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-6">
                    <h3 class="text-lg font-bold text-military-800 mb-4 border-b pb-2">H∆∞·ªõng d·∫´n ƒê√≥ng g√≥i & Ph√°t h√†nh</h3>
                    <p class="text-sm text-gray-600 mb-4">
                        D∆∞·ªõi ƒë√¢y l√† quy tr√¨nh k·ªπ thu·∫≠t chi ti·∫øt ƒë·ªÉ ƒë√≥ng g√≥i ·ª©ng d·ª•ng th√†nh file <code>.exe</code> v√† c√°c l∆∞u √Ω S·ªêNG C√íN ƒë·ªÉ tr√°nh m·∫•t d·ªØ li·ªáu.
                    </p>
                    
                    <!-- Tabs Header -->
                    <div class="flex gap-1 bg-gray-100 p-1 rounded-lg mb-6">
                        <button onclick="switchDeployTab('pack')" id="tab-btn-pack" class="deploy-tab active flex-1 py-2 text-sm font-semibold text-gray-500 rounded-md transition-all">1. K·ªπ thu·∫≠t ƒê√≥ng g√≥i (Dev)</button>
                        <button onclick="switchDeployTab('create')" id="tab-btn-create" class="deploy-tab flex-1 py-2 text-sm font-semibold text-gray-500 rounded-md transition-all">2. Ph√°t h√†nh Update (Dev)</button>
                        <button onclick="switchDeployTab('user')" id="tab-btn-user" class="deploy-tab flex-1 py-2 text-sm font-semibold text-gray-500 rounded-md transition-all">3. Quy tr√¨nh T·∫°i ƒê∆°n v·ªã (User)</button>
                    </div>

                    <!-- TAB 1: ƒê√ìNG G√ìI -->
                    <div id="tab-content-pack" class="deploy-content animate-fade-in block">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div class="space-y-4">
                                <h4 class="font-bold text-gray-800 border-l-4 border-blue-500 pl-3">A. Checklist tr∆∞·ªõc khi Build</h4>
                                <p class="text-sm text-gray-600">Tr∆∞·ªõc khi ch·∫°y l·ªánh ƒë√≥ng g√≥i, h√£y ki·ªÉm tra k·ªπ file <code>package.json</code> v√† t√†i nguy√™n:</p>
                                <ul class="list-disc pl-5 text-sm text-gray-600 space-y-2">
                                    <li>
                                        <strong>Icon:</strong> File <code>public/icon.ico</code> ph·∫£i t·ªìn t·∫°i. K√≠ch th∆∞·ªõc t·ªëi thi·ªÉu 256x256. 
                                        <br><span class="text-red-500 text-xs italic">L·ªói th∆∞·ªùng g·∫∑p: N·∫øu icon sai ƒë∆∞·ªùng d·∫´n, qu√° tr√¨nh build s·∫Ω b√°o l·ªói "Icon not found".</span>
                                    </li>
                                    <li>
                                        <strong>Config:</strong> Ki·ªÉm tra ph·∫ßn <code>"build"</code> trong package.json:
                                        <div class="bg-gray-100 p-2 rounded text-xs font-mono mt-1">
                                            "files": ["dist/**/*", "main.js", "preload.js"] <br>
                                            "directories": { "output": "release" }
                                        </div>
                                    </li>
                                    <li>
                                        <strong>Clean:</strong> X√≥a th∆∞ m·ª•c <code>dist</code> v√† <code>release</code> c≈© ƒë·ªÉ tr√°nh cache:
                                        <br><code class="bg-gray-100 p-1 rounded">rm -rf dist release</code>
                                    </li>
                                </ul>
                            </div>
                            <div class="space-y-4">
                                <h4 class="font-bold text-gray-800 border-l-4 border-blue-500 pl-3">B. Th·ª±c hi·ªán ƒê√≥ng g√≥i</h4>
                                <div class="bg-gray-900 text-gray-200 p-4 rounded-lg font-mono text-xs">
                                    <div class="text-gray-500"># 1. C√†i ƒë·∫∑t l·∫°i th∆∞ vi·ªán (ƒë·ªÉ ch·∫Øc ch·∫Øn)</div>
                                    <div class="text-green-400 mb-2">npm install</div>
                                    
                                    <div class="text-gray-500"># 2. Ch·∫°y l·ªánh build (ƒê√£ c·∫•u h√¨nh trong package.json)</div>
                                    <div class="text-gray-500 italic mb-1">// L·ªánh n√†y s·∫Ω ch·∫°y: tsc && vite build && electron-builder</div>
                                    <div class="text-green-400 mb-2">npm run dist</div>
                                    
                                    <div class="text-gray-500"># 3. Ki·ªÉm tra k·∫øt qu·∫£</div>
                                    <div class="text-yellow-400">Ki·ªÉm tra th∆∞ m·ª•c: ./release/</div>
                                    <div class="text-yellow-400">File m·ª•c ti√™u: QLQN Manager Setup 2.x.x.exe</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- TAB 2: T·∫†O UPDATE -->
                    <div id="tab-content-create" class="deploy-content animate-fade-in hidden">
                        <div class="bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-400 mb-6 text-sm text-yellow-900 shadow-sm">
                            <h4 class="font-bold uppercase mb-1">‚ö†Ô∏è Nguy√™n t·∫Øc B·∫•t di b·∫•t d·ªãch</h4>
                            <p>ƒê·ªÉ ƒë·∫£m b·∫£o c∆° ch·∫ø Auto-Update c·ªßa Installer ho·∫°t ƒë·ªông ƒë√∫ng v√† <strong>KH√îNG L√ÄM M·∫§T D·ªÆ LI·ªÜU</strong>, b·∫°n tuy·ªát ƒë·ªëi:</p>
                            <ul class="list-disc pl-5 mt-2 font-bold">
                                <li>KH√îNG thay ƒë·ªïi <code>appId</code> ("com.danghoang.qlqn") trong package.json.</li>
                                <li>KH√îNG thay ƒë·ªïi t√™n s·∫£n ph·∫©m (productName) qu√° kh√°c bi·ªát.</li>
                            </ul>
                            <p class="mt-2 text-xs font-normal text-gray-600">L√Ω do: Windows Installer d·ª±a v√†o appId ƒë·ªÉ nh·∫≠n di·ªán ƒë√¢y l√† b·∫£n c·∫≠p nh·∫≠t c·ªßa ph·∫ßn m·ªÅm c≈© ch·ª© kh√¥ng ph·∫£i ph·∫ßn m·ªÅm m·ªõi.</p>
                        </div>
                        
                        <div class="relative pl-8 space-y-8 before:absolute before:left-3 before:top-2 before:bottom-2 before:w-0.5 before:bg-gray-200">
                            <div class="relative">
                                <div class="absolute -left-[29px] top-0 w-6 h-6 bg-blue-500 rounded-full text-white flex items-center justify-center text-xs font-bold">1</div>
                                <h4 class="font-bold text-gray-800">TƒÉng phi√™n b·∫£n (Version Bump)</h4>
                                <p class="text-sm text-gray-600 mt-1">M·ªü file <code>package.json</code>. TƒÉng version theo quy t·∫Øc Semantic Versioning (Major.Minor.Patch).</p>
                                <div class="flex gap-4 mt-2">
                                    <div class="bg-gray-100 px-3 py-1 rounded text-xs border">S·ª≠a l·ªói nh·ªè: 2.6.0 -> 2.6.1</div>
                                    <div class="bg-gray-100 px-3 py-1 rounded text-xs border">T√≠nh nƒÉng m·ªõi: 2.6.0 -> 2.7.0</div>
                                </div>
                            </div>

                            <div class="relative">
                                <div class="absolute -left-[29px] top-0 w-6 h-6 bg-blue-500 rounded-full text-white flex items-center justify-center text-xs font-bold">2</div>
                                <h4 class="font-bold text-gray-800">Build & Test Local</h4>
                                <p class="text-sm text-gray-600 mt-1">Ch·∫°y <code>npm run dist</code>. Sau khi c√≥ file .exe, h√£y ch·∫°y th·ª≠ tr√™n m√°y Dev tr∆∞·ªõc. ƒê·∫£m b·∫£o app m·ªü l√™n ƒë∆∞·ª£c v√† hi·ªÉn th·ªã ƒë√∫ng version m·ªõi ·ªü g√≥c m√†n h√¨nh Login.</p>
                            </div>

                            <div class="relative">
                                <div class="absolute -left-[29px] top-0 w-6 h-6 bg-blue-500 rounded-full text-white flex items-center justify-center text-xs font-bold">3</div>
                                <h4 class="font-bold text-gray-800">Ph√¢n ph·ªëi Offline (USB/LAN)</h4>
                                <p class="text-sm text-gray-600 mt-1">
                                    Copy file <code>QLQN Manager Setup [Version].exe</code> v√†o USB an to√†n. 
                                    <br><span class="italic text-xs text-gray-500">L∆∞u √Ω: N√™n qu√©t virus USB tr∆∞·ªõc khi c·∫Øm v√†o m√°y ƒë∆°n v·ªã.</span>
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- TAB 3: USER GUIDE -->
                    <div id="tab-content-user" class="deploy-content animate-fade-in hidden">
                         <div class="bg-white border-l-4 border-red-600 p-6 rounded-r-xl shadow-md mb-6">
                            <h3 class="text-red-700 font-black uppercase text-lg mb-2 flex items-center gap-2">
                                üõë C·∫¢NH B√ÅO QUAN TR·ªåNG NH·∫§T
                            </h3>
                            <p class="text-gray-800 font-bold">
                                TUY·ªÜT ƒê·ªêI KH√îNG T·ª∞ √ù G·ª† C√ÄI ƒê·∫∂T (UNINSTALL) PH·∫¶N M·ªÄM C≈® TR∆Ø·ªöC KHI C√ÄI M·ªöI.
                            </p>
                            <p class="text-sm text-gray-600 mt-2">
                                <strong>L√Ω do:</strong> C∆° s·ªü d·ªØ li·ªáu n·∫±m trong th∆∞ m·ª•c c√†i ƒë·∫∑t c·ªßa ng∆∞·ªùi d√πng. Vi·ªác g·ª° c√†i ƒë·∫∑t s·∫Ω X√ìA S·∫†CH to√†n b·ªô h·ªì s∆° qu√¢n nh√¢n.
                                <br>Ch·ªâ c·∫ßn ch·∫°y file c√†i ƒë·∫∑t m·ªõi, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông c·∫≠p nh·∫≠t v√† gi·ªØ nguy√™n d·ªØ li·ªáu.
                            </p>
                         </div>

                         <div class="bg-green-50 p-6 rounded-xl border border-green-200">
                            <h3 class="text-lg font-bold text-green-900 mb-4 flex items-center gap-2">
                                <span>üìã</span> Quy tr√¨nh C·∫≠p nh·∫≠t An to√†n
                            </h3>

                            <div class="space-y-4">
                                <!-- Step 1 -->
                                <div class="flex gap-4 items-start">
                                    <div class="bg-white w-8 h-8 rounded-full border-2 border-green-500 flex items-center justify-center font-bold text-green-700 shrink-0">1</div>
                                    <div>
                                        <h4 class="font-bold text-gray-800">Sao l∆∞u d·ªØ li·ªáu (B·∫Øt bu·ªôc)</h4>
                                        <p class="text-sm text-gray-600">M·ªü ph·∫ßn m·ªÅm c≈© -> V√†o <strong>C√†i ƒë·∫∑t</strong> -> Ch·ªçn <strong>"Sao l∆∞u d·ªØ li·ªáu"</strong>. L∆∞u file <code>backup_[ngay].json</code> ra m√†n h√¨nh Desktop ho·∫∑c ·ªï D.</p>
                                    </div>
                                </div>
                                
                                <!-- Step 2 -->
                                <div class="flex gap-4 items-start">
                                    <div class="bg-white w-8 h-8 rounded-full border-2 border-green-500 flex items-center justify-center font-bold text-green-700 shrink-0">2</div>
                                    <div>
                                        <h4 class="font-bold text-gray-800">Ch·∫°y b·ªô c√†i ƒë·∫∑t m·ªõi</h4>
                                        <p class="text-sm text-gray-600">ƒê√≥ng ph·∫ßn m·ªÅm ƒëang ch·∫°y. C·∫Øm USB v√† ch·∫°y file <code>Setup v2.7.x.exe</code>. ƒê·ª£i thanh c√†i ƒë·∫∑t ch·∫°y xong.</p>
                                    </div>
                                </div>

                                <!-- Step 3 -->
                                <div class="flex gap-4 items-start">
                                    <div class="bg-white w-8 h-8 rounded-full border-2 border-green-500 flex items-center justify-center font-bold text-green-700 shrink-0">3</div>
                                    <div>
                                        <h4 class="font-bold text-gray-800">Ki·ªÉm tra k·∫øt qu·∫£</h4>
                                        <p class="text-sm text-gray-600">Ph·∫ßn m·ªÅm s·∫Ω t·ª± m·ªü l·∫°i. Ki·ªÉm tra:
                                            <ul class="list-disc pl-5 mt-1 text-xs text-gray-500">
                                                <li>S·ªë hi·ªáu phi√™n b·∫£n ·ªü m√†n h√¨nh ƒëƒÉng nh·∫≠p ƒë√£ ƒë·ªïi ch∆∞a?</li>
                                                <li>Danh s√°ch qu√¢n nh√¢n c√≥ c√≤n nguy√™n v·∫πn kh√¥ng?</li>
                                            </ul>
                                        </p>
                                    </div>
                                </div>

                                <!-- Step 4 -->
                                <div class="flex gap-4 items-start opacity-75">
                                    <div class="bg-white w-8 h-8 rounded-full border-2 border-gray-400 flex items-center justify-center font-bold text-gray-500 shrink-0">4</div>
                                    <div>
                                        <h4 class="font-bold text-gray-800">X·ª≠ l√Ω s·ª± c·ªë (N·∫øu c√≥)</h4>
                                        <p class="text-sm text-gray-600">N·∫øu ch·∫≥ng may m·∫•t d·ªØ li·ªáu, h√£y v√†o <strong>C√†i ƒë·∫∑t</strong> -> <strong>"Kh√¥i ph·ª•c d·ªØ li·ªáu"</strong> v√† ch·ªçn file backup ·ªü B∆∞·ªõc 1.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- 5. SECURITY VIEW -->
            <div id="view-security" class="view-section hidden">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 mb-8">
                    <h3 class="text-lg font-bold text-military-800 mb-4 flex items-center gap-2">
                        <span>üõ°Ô∏è</span> C∆° ch·∫ø b·∫£o m·∫≠t h·ªá th·ªëng
                    </h3>
                    <ul class="space-y-4">
                        <li class="flex gap-4 p-3 bg-red-50 rounded-lg border border-red-100">
                            <div class="font-bold text-red-600 min-w-[120px]">1. M·∫≠t kh·∫©u Admin</div>
                            <div class="text-sm text-gray-700">
                                ƒê∆∞·ª£c l∆∞u t√°ch bi·ªát trong file <code>app_secure_settings.json</code> t·∫°i th∆∞ m·ª•c UserData c·ªßa h·ªá ƒëi·ªÅu h√†nh. 
                                <br><strong>Tuy·ªát ƒë·ªëi kh√¥ng l∆∞u trong Database Dexie</strong> ƒë·ªÉ tr√°nh b·ªã l·ªô khi xu·∫•t backup.
                            </div>
                        </li>
                        <li class="flex gap-4 p-3 bg-red-50 rounded-lg border border-red-100">
                            <div class="font-bold text-red-600 min-w-[120px]">2. M√£ h√≥a Hash</div>
                            <div class="text-sm text-gray-700">
                                S·ª≠ d·ª•ng thu·∫≠t to√°n <strong>SHA-256</strong> k·∫øt h·ª£p v·ªõi chu·ªói <strong>Salt</strong> (<code>DHsystem_Salt_...</code>) ƒë∆∞·ª£c hardcode trong Main Process.
                            </div>
                        </li>
                        <li class="flex gap-4 p-3 bg-red-50 rounded-lg border border-red-100">
                            <div class="font-bold text-red-600 min-w-[120px]">3. B·∫£o v·ªá File</div>
                            <div class="text-sm text-gray-700">
                                ·∫¢nh ch√¢n dung ƒë∆∞·ª£c n√©n th√†nh chu·ªói Base64 v√† l∆∞u tr·ª±c ti·∫øp v√†o IndexedDB. H·ªá th·ªëng kh√¥ng l∆∞u file ·∫£nh r·ªùi (.jpg, .png) trong th∆∞ m·ª•c c√†i ƒë·∫∑t, gi√∫p tr√°nh vi·ªác truy c·∫≠p tr√°i ph√©p t·ª´ Windows Explorer.
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 6. TROUBLESHOOT VIEW -->
            <div id="view-troubleshoot" class="view-section hidden">
                <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100 min-h-[500px]">
                    <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                        <h3 class="text-lg font-bold text-military-800">C√°c v·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p</h3>
                        <input type="text" id="faq-search" onkeyup="filterFAQ()" placeholder="üîç T√¨m ki·∫øm l·ªói..." class="mt-4 md:mt-0 px-4 py-2 border rounded-lg text-sm w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-military-600">
                    </div>

                    <div id="faq-list" class="space-y-4">
                        <!-- FAQ Item 1 -->
                        <div class="faq-item border rounded-lg overflow-hidden">
                            <button class="w-full text-left p-4 bg-gray-50 hover:bg-gray-100 font-bold text-gray-700 flex justify-between items-center" onclick="toggleFAQ(this)">
                                M·∫•t d·ªØ li·ªáu sau khi c√†i l·∫°i Windows
                                <span class="text-gray-400 text-xl">+</span>
                            </button>
                            <div class="hidden p-4 bg-white border-t text-sm text-gray-600">
                                <strong>Nguy√™n nh√¢n:</strong> IndexedDB n·∫±m trong th∆∞ m·ª•c AppData c·ªßa User (·ªï C). Khi c√†i l·∫°i Win s·∫Ω m·∫•t.<br>
                                <strong>Gi·∫£i ph√°p:</strong> Ph·∫£i d√πng ch·ª©c nƒÉng <strong>"Sao l∆∞u d·ªØ li·ªáu" (Backup)</strong> ra file .json th∆∞·ªùng xuy√™n v√† l∆∞u ·ªü ·ªï D ho·∫∑c USB.
                            </div>
                        </div>

                        <!-- FAQ Item 2 -->
                        <div class="faq-item border rounded-lg overflow-hidden">
                            <button class="w-full text-left p-4 bg-gray-50 hover:bg-gray-100 font-bold text-gray-700 flex justify-between items-center" onclick="toggleFAQ(this)">
                                Kh√¥ng ƒëƒÉng nh·∫≠p ƒë∆∞·ª£c (Qu√™n m·∫≠t kh·∫©u Admin)
                                <span class="text-gray-400 text-xl">+</span>
                            </button>
                            <div class="hidden p-4 bg-white border-t text-sm text-gray-600">
                                <strong>Gi·∫£i ph√°p:</strong> V√†o th∆∞ m·ª•c <code>%APPDATA%/QuanLyQuanNhan_DHSystem</code> v√† x√≥a file <code>app_secure_settings.json</code>. <br>
                                M·∫≠t kh·∫©u s·∫Ω tr·ªü v·ªÅ m·∫∑c ƒë·ªãnh l√† <code>Admin@123</code> (ho·∫∑c <code>123456</code> t√πy phi√™n b·∫£n code).
                            </div>
                        </div>

                         <!-- FAQ Item 3 -->
                         <div class="faq-item border rounded-lg overflow-hidden">
                            <button class="w-full text-left p-4 bg-gray-50 hover:bg-gray-100 font-bold text-gray-700 flex justify-between items-center" onclick="toggleFAQ(this)">
                                Ph·∫ßn m·ªÅm b·ªã tr·∫Øng m√†n h√¨nh (White Screen)
                                <span class="text-gray-400 text-xl">+</span>
                            </button>
                            <div class="hidden p-4 bg-white border-t text-sm text-gray-600">
                                <strong>Nguy√™n nh√¢n:</strong> Th∆∞·ªùng do l·ªói React ho·∫∑c b·ªô nh·ªõ tr√†n (do upload ·∫£nh qu√° n·∫∑ng).<br>
                                <strong>Debug:</strong> Nh·∫•n <code>Ctrl + Shift + I</code> ƒë·ªÉ m·ªü Console xem l·ªói. Ki·ªÉm tra l·∫°i k√≠ch th∆∞·ªõc ·∫£nh ƒë·∫ßu v√†o.
                            </div>
                        </div>
                        
                         <!-- FAQ Item 4 -->
                         <div class="faq-item border rounded-lg overflow-hidden">
                            <button class="w-full text-left p-4 bg-gray-50 hover:bg-gray-100 font-bold text-gray-700 flex justify-between items-center" onclick="toggleFAQ(this)">
                                H·ªá th·ªëng ch·∫°y ch·∫≠m
                                <span class="text-gray-400 text-xl">+</span>
                            </button>
                            <div class="hidden p-4 bg-white border-t text-sm text-gray-600">
                                <strong>Nguy√™n nh√¢n:</strong> Load qu√° nhi·ªÅu ·∫£nh g·ªëc ch·∫•t l∆∞·ª£ng cao c√πng l√∫c.<br>
                                <strong>Gi·∫£i ph√°p:</strong> H·ªá th·ªëng c√≥ c∆° ch·∫ø <code>anh_thumb</code>. ƒê·∫£m b·∫£o Dashboard ch·ªâ load ·∫£nh thumb. H·∫°n ch·∫ø danh s√°ch > 1000 ng∆∞·ªùi tr√™n 1 trang (d√πng ph√¢n trang/lazy load).
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-8 p-6 bg-military-800 text-white rounded-xl shadow-lg">
                    <h3 class="font-bold mb-4 uppercase tracking-wider">üöÄ H∆∞·ªõng ph√°t tri·ªÉn ti·∫øp theo</h3>
                    <ul class="list-disc pl-5 space-y-2 text-sm text-gray-200">
                        <li>Th√™m t√≠nh nƒÉng ƒë·ªìng b·ªô <strong>P2P qua m·∫°ng LAN</strong> n·ªôi b·ªô.</li>
                        <li>M√£ h√≥a to√†n b·ªô Database Dexie (At-rest encryption).</li>
                        <li>T√≠ch h·ª£p bi·ªÉu ƒë·ªì th·ªëng k√™ Chart.js n√¢ng cao v√†o Dashboard ch√≠nh.</li>
                    </ul>
                </div>
            </div>

        </div>
    </main>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA DEFS ---
        const tableDefinitions = {
            'personnel': [
                { field: 'id', type: 'String (Timestamp)', desc: 'Kh√≥a ch√≠nh, ƒë·ªãnh danh duy nh·∫•t' },
                { field: 'ho_ten', type: 'String', desc: 'H·ªç v√† t√™n khai sinh (UPPERCASE)' },
                { field: 'cccd', type: 'String', desc: 'S·ªë cƒÉn c∆∞·ªõc c√¥ng d√¢n' },
                { field: 'don_vi_id', type: 'String', desc: 'ID ƒë∆°n v·ªã qu·∫£n l√Ω' },
                { field: 'quan_he_gia_dinh', type: 'Object (JSON)', desc: 'Ch·ª©a m·∫£ng cha m·∫π, v·ª£ con...' },
                { field: 'lich_su_vi_pham', type: 'Object (JSON)', desc: 'M·∫£ng ghi nh·∫≠n k·ª∑ lu·∫≠t' },
                { field: 'tai_chinh_suc_khoe', type: 'Object (JSON)', desc: 'Th√¥ng tin vay n·ª£, b·ªánh l√Ω' }
            ],
            'units': [
                { field: 'id', type: 'String', desc: 'ID ƒë∆°n v·ªã' },
                { field: 'name', type: 'String', desc: 'T√™n hi·ªÉn th·ªã ƒë∆°n v·ªã' },
                { field: 'parentId', type: 'String | Null', desc: 'ID ƒë∆°n v·ªã cha (t·∫°o c·∫•u tr√∫c c√¢y)' }
            ],
            'logs': [
                { field: 'id', type: 'String', desc: 'ID log' },
                { field: 'timestamp', type: 'Number', desc: 'Th·ªùi gian ghi nh·∫≠n' },
                { field: 'action', type: 'String', desc: 'Lo·∫°i h√†nh ƒë·ªông (ADD, UPDATE, DELETE)' },
                { field: 'detail', type: 'String', desc: 'Chi ti·∫øt thay ƒë·ªïi' }
            ]
        };

        // --- NAVIGATION LOGIC ---
        function navigate(viewId) {
            // Update Menu
            document.querySelectorAll('.nav-item').forEach(el => {
                el.classList.remove('active');
            });
            document.getElementById(`nav-${viewId}`).classList.add('active');

            // Update View
            document.querySelectorAll('.view-section').forEach(el => el.classList.add('hidden'));
            document.getElementById(`view-${viewId}`).classList.remove('hidden');

            // Update Title
            const titles = {
                'overview': 'T·ªïng quan h·ªá th·ªëng',
                'architecture': 'Ki·∫øn tr√∫c & Source Code',
                'database': 'C∆° s·ªü d·ªØ li·ªáu (Dexie)',
                'deployment': 'Quy tr√¨nh ƒê√≥ng g√≥i & Update',
                'security': 'C∆° ch·∫ø B·∫£o m·∫≠t',
                'troubleshoot': 'X·ª≠ l√Ω s·ª± c·ªë'
            };
            document.getElementById('page-title').textContent = titles[viewId];
        }

        // --- DEPLOYMENT TABS LOGIC ---
        function switchDeployTab(tabId) {
            // Reset Buttons
            document.querySelectorAll('.deploy-tab').forEach(el => el.classList.remove('active'));
            document.getElementById(`tab-btn-${tabId}`).classList.add('active');

            // Reset Content
            document.querySelectorAll('.deploy-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`tab-content-${tabId}`).classList.remove('hidden');
        }

        // --- TREE VIEW LOGIC ---
        function toggleFolder(id) {
            const el = document.getElementById(id);
            if (el.classList.contains('open')) {
                el.classList.remove('open');
            } else {
                el.classList.add('open');
            }
        }

        function toggleTree(descId) {
            const el = document.getElementById(descId);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
            } else {
                el.classList.add('hidden');
            }
        }

        // --- DATABASE DETAIL LOGIC ---
        function showTableDetail(tableName) {
            const defs = tableDefinitions[tableName];
            if (!defs) return;

            document.getElementById('db-detail-placeholder').classList.add('hidden');
            document.getElementById('db-detail-content').classList.remove('hidden');
            
            document.getElementById('table-name').textContent = `Table: ${tableName}`;
            
            const tbody = document.getElementById('table-fields');
            tbody.innerHTML = ''; // Clear old

            defs.forEach(row => {
                const tr = document.createElement('tr');
                tr.className = "hover:bg-gray-50 border-b border-gray-100";
                tr.innerHTML = `
                    <td class="p-3 font-mono text-blue-700 font-bold">${row.field}</td>
                    <td class="p-3"><span class="px-2 py-1 bg-gray-100 rounded text-xs text-gray-600 font-mono">${row.type}</span></td>
                    <td class="p-3 text-gray-600">${row.desc}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- FAQ FILTER LOGIC ---
        function toggleFAQ(btn) {
            const content = btn.nextElementSibling;
            const icon = btn.querySelector('span');
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.textContent = '-';
            } else {
                content.classList.add('hidden');
                icon.textContent = '+';
            }
        }

        function filterFAQ() {
            const input = document.getElementById('faq-search').value.toLowerCase();
            const items = document.getElementsByClassName('faq-item');
            
            for (let i = 0; i < items.length; i++) {
                const text = items[i].innerText.toLowerCase();
                if (text.includes(input)) {
                    items[i].style.display = "";
                } else {
                    items[i].style.display = "none";
                }
            }
        }

        // --- CHARTS INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            // Tech Stack Chart
            const ctxStack = document.getElementById('techStackChart').getContext('2d');
            new Chart(ctxStack, {
                type: 'doughnut',
                data: {
                    labels: ['Core (Electron)', 'Frontend (React)', 'Data (Dexie)', 'Style (Tailwind)'],
                    datasets: [{
                        data: [20, 40, 25, 15],
                        backgroundColor: ['#3b82f6', '#06b6d4', '#eab308', '#14b8a6'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });

            // DB Complexity Chart
            const ctxDB = document.getElementById('dbComplexityChart').getContext('2d');
            new Chart(ctxDB, {
                type: 'bar',
                data: {
                    labels: ['Personnel', 'Units', 'Settings', 'Logs'],
                    datasets: [{
                        label: 'S·ªë l∆∞·ª£ng tr∆∞·ªùng (Fields)',
                        data: [25, 3, 2, 4], // Estimated complexity
                        backgroundColor: '#14452F',
                        borderRadius: 4
                    }, {
                        label: 'ƒê·ªô ph·ª©c t·∫°p c·∫•u tr√∫c (1-10)',
                        data: [9, 5, 2, 3],
                        backgroundColor: '#22c55e',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        });
    </script>
</body>
</html>